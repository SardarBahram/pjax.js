/* Pjax.js 0.5.3 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e,t,n){"use strict";function r(){return b?(clearTimeout(b),b=0,D.className="pjax-loader pjax-hide",void setTimeout(r,20)):(D||(D=e.createElement("div"),D.innerHTML='<div class="pjax-progress"></div>',e.body.appendChild(D)),D.className="pjax-loader pjax-start",void(b=setTimeout(function(){b=0,D.className+=" pjax-inload"},10)))}function a(){b&&clearTimeout(b),D.className+=" pjax-end",b=setTimeout(function(){b=0,D.className+=" pjax-hide"},1e3)}function o(e){var t=[];return[].slice.call(e.querySelectorAll("[name]")).forEach(function(e){e.name&&q.test(e.tagName)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")}function i(e){if(P)return(new DOMParser).parseFromString(e,"text/html");var t=k.createHTMLDocument("");return/^(\s+|)(<(\!doctype|html)(\s+|\s[\s\S]+|)>)/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=k.createHTMLDocument(""),t.write(e))):t.body.innerHTML=e,t}function l(t){var n,r,a,o=[],i=t.children;for(n=i.length-1;n>=0;n--)"TITLE"!==i[n].tagName&&o.push(i[n].outerHTML);for(i=e.head.children,n=i.length-1;n>=0;n--)"TITLE"===i[n].tagName||d(i[n],"resource")||(r=o.indexOf(i[n].outerHTML),-1===r?i[n].parentNode.removeChild(i[n]):o.splice(r,1));for(a=e.createElement("div"),a.innerHTML=o.join(""),i=a.children,n=i.length-1;n>=0;n--)d(i[n],"resource")||e.head.appendChild(i[n]);a=o=null}function c(e,t,n,r){if(X[e])for(var a=X[e],o=0;o<a.length;o++)a[o](t,n,r)}function s(e,t,n){if("function"==typeof t){X[e]||(X[e]=[]);var r=X[e];if(!n)return void r.push(t);var a,o=[];for(a=r.length-1;a>=0;a--)r[a]===t&&o.push(a);for(a=o.length-1;a>=0;a--)r.splice(o[a],1)}}function u(n,r,a,o){var s,u=i(r),d=u.title||"",f=a.containers,p=a.scrollLeft>0?+a.scrollLeft:t.scrollX||t.pageXOffset,h=a.scrollTop>0?+a.scrollTop:t.scrollY||t.pageYOffset;if(o){var m={pjaxUrl:n,pjaxData:r,pjaxConfig:a};1===o?C.pushState(m,d,n):2===o&&C.replaceState(m,d,n)}if(!X.dom||c("dom",n,u)!==!1){a.updatehead&&u.head&&l(u.head),e.title=d;for(var v=f.length-1;v>=0;v--)s=u.body.querySelector(f[v]),s&&[].slice.call(e.querySelectorAll(f[v])).forEach(function(e){e.innerHTML=s.innerHTML});t.scrollTo(p,h),u=f=null}}function d(e,t){var n,r=e.getAttribute("data-pjax-"+t);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(a){}return n||r}function f(e){var t,n,r,a=JSON.parse(JSON.stringify(N)),o=["containers","updatecurrent","updatehead","loader","scroll-left","scroll-right","done","fail"];if(!e)return a;for(var i=o.length-1;i>=0;i--)t=o[i],r=d(e,t),r&&(n=t.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),a[n]=r);return a}function p(e,t,n,r){u(e,t,n,r),c("done",e),c("then",e),H&&new Function(H).call(w)}function h(e,t){c("fail",e,t),c("then",e),O&&new Function(O).call(w)}function m(){M&&M.abort(),O=H=n}function v(t){var n,r="_="+ +new Date;return U?(n=e.createElement("a"),n.href=t):n=new U(t),n.search+=n.search?"&"+r:"?"+r,t=n.toString(),n=null,t}function S(e,t,n,r,a){m();var o=f(r);if(H=o.done,O=o.fail,w=r,c("initiate",e,o),X.handler)return void c("handler",{url:e,state:t,method:n,element:r},o,p,h);var i={"X-PJAX-Container":o.containers.join(","),"X-PJAX-URL":e,"X-PJAX":"true"},l=N.proxy||e;N.nocache&&(l=v(e)),M=new XMLHttpRequest,M.open(n,l,!0);for(var s in i)M.setRequestHeader(s,i[s]);M.onreadystatechange=function(){if(4===this.readyState){var n=this.status;n>=200&&300>n||304===n?p(e,this.responseText,o,t):h(e,n)}},M.send(a||"")}function g(e){if(0===e.button){var t,n,r=e.target;if(r.matches(N.linkSelector))t=r.href;else{for(;r=r.parentNode;){"A"===r.tagName&&(n=r);break}if(!n||!n.matches(N.linkSelector))return;r=n,t=r.href}j("GET",t,null,r,e)}}function x(e){var n,r,a,i=e.target;if(i.matches(N.formSelector)&&(a=String(i.method).toUpperCase(),"POST"!==a||t.FormData)){if(n=i.action,"POST"!==a||"multipart/form-data"!==i.enctype)r=o(i),"POST"!==a&&(n=n.replace(/\?.*/g,"")+"?",r&&(n+=r),r=null);else{if(!t.FormData)return;r=new FormData(i)}j(a,n,r,i,e)}}function j(e,n,r,a,o){return 0===n.indexOf(A+"/")||n===A?(o.preventDefault(),n===t.location+""&&"POST"!==e?void(N.updatecurrent&&S(n,2,e,a,r)):void S(n,1,e,a,r)):void 0}function L(e){e.state&&e.state.pjaxUrl&&(m(),u(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),c("history",e.state.pjaxUrl,e.state))}function T(){if(!F){F=!1;var n=t.location+"",o=t.history.state;o&&o.pjaxUrl||C.replaceState({pjaxUrl:n,pjaxData:e.documentElement.outerHTML,pjaxConfig:N},e.title,n),s("initiate",r),s("then",a),t.addEventListener("unload",m),t.addEventListener("popstate",L),N.linkSelector&&e.addEventListener("click",g),N.formSelector&&e.addEventListener("submit",x)}}function y(){N&&F&&(N.load&&(s("initiate",r,!0),s("then",a,!0)),e.removeEventListener("click",g),e.removeEventListener("submit",x),t.removeEventListener("unload",m),t.removeEventListener("popstate",L),F=!1,N=n)}function E(n){if(/^http(|s):$/.test(t.location.protocol)&&t.Pjax.supported){y(),N={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,proxy:""};for(var r in N)n&&r in n&&(N[r]=n[r]);n=null,/^(interactive|complete)$/.test(e.readyState)?T():e.addEventListener("DOMContentLoaded",T)}}var M,N,b,D,H,O,w,C=t.history,U=t.URL,P=!!t.DOMParser,X={},k=e.implementation,A=t.location.protocol.replace(/:/g,"")+"://"+t.location.host,q=/^(input|textarea|select|datalist|button|output)$/i,F=!1,J=t.Element&&t.Element.prototype;if(t.Pjax={supported:!!(J&&C.pushState&&(P||k&&k.createHTMLDocument)),remove:y,start:E,request:function(e,t){S(e,t.replace?2:1,t.method,null,t.data)},on:function(e,t){s(e,t)},off:function(e,t){s(e,t,!0)}},P)try{var R=i("<html><head><title>1</title></head><body>1</body></html>");P=!!(R.head&&R.title&&R.body)}catch($){P=!1}J&&!J.matches&&(J.matches=J.matchesSelector||J.mozMatchesSelector||J.msMatchesSelector||J.oMatchesSelector||J.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1})}(document,window);
